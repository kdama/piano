(this.webpackJsonppiano=this.webpackJsonppiano||[]).push([[0],{11:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(4),o=a.n(c),s=(a(11),a(2)),i=a(1),l=a(5);let u;function _(e){switch(e.key){case u.C:return 12*e.octave+0+12;case u.CSharp:return 12*e.octave+1+12;case u.D:return 12*e.octave+2+12;case u.DSharp:return 12*e.octave+3+12;case u.E:return 12*e.octave+4+12;case u.F:return 12*e.octave+5+12;case u.FSharp:return 12*e.octave+6+12;case u.G:return 12*e.octave+7+12;case u.GSharp:return 12*e.octave+8+12;case u.A:return 12*e.octave+9+12;case u.ASharp:return 12*e.octave+10+12;case u.B:return 12*e.octave+11+12}}function p(e){const t=Math.floor(e/12)-1;switch(e%12){case 0:return{key:u.C,octave:t};case 1:return{key:u.CSharp,octave:t};case 2:return{key:u.D,octave:t};case 3:return{key:u.DSharp,octave:t};case 4:return{key:u.E,octave:t};case 5:return{key:u.F,octave:t};case 6:return{key:u.FSharp,octave:t};case 7:return{key:u.G,octave:t};case 8:return{key:u.GSharp,octave:t};case 9:return{key:u.A,octave:t};case 10:return{key:u.ASharp,octave:t};case 11:return{key:u.B,octave:t};default:return{key:u.C,octave:0}}}function b(e){return e.key.toUpperCase()+e.octave}!function(e){e.C="C",e.CSharp="C#",e.D="D",e.DSharp="D#",e.E="E",e.F="F",e.FSharp="F#",e.G="G",e.GSharp="G#",e.A="A",e.ASharp="A#",e.B="B"}(u||(u={}));const h=[{firstNote:{key:u.C,octave:3},keys:["z","s","x","d","c","v","g","b","h","n","j","m",",","l",".",";","/","\\","]"]},{firstNote:{key:u.C,octave:4},keys:["q","2","w","3","e","r","5","t","6","y","7","u","i","9","o","0","p","@","^","["]},{firstNote:{key:u.A,octave:5},keys:["Enter"]}];function f(e,t){if(e.repeat)return;const a=h.find(t=>t.keys.includes(e.key));if(!a)return;const r=a.keys.indexOf(e.key);return n=a.firstNote,c=r+t,p(_(n)+c);var n,c}const y=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"],d="acoustic_grand_piano";function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e){const t=e.map(e=>_(e)),a=Math.min(...t),r=p(a),n=Array(11).fill(null).map((e,t)=>t+1).filter(e=>t.some(t=>(t-a)%12===e)),c=Object.keys(v).map(e=>({label:e,score:k(n,v[e])}));return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({key:r.key},c.reduce((e,t)=>e.score>=t.score?e:t))}const v={5:[7],"":[4,7],m:[3,7],aug:[4,8],dim:[3,6],sus2:[2,7],sus4:[5,7],M7:[4,7,11],m7:[3,7,10],7:[4,7,10],"7\u266d5":[4,6,10],"7sus4":[5,7,10],mM7:[3,7,11],dim7:[3,6,11],"\xf87":[3,6,10],M9:[2,4,7,11],m9:[2,3,7,10],M11:[2,4,5,7,11],m11:[2,3,5,7,10],M13:[2,4,6,7,9,11],m13:[2,3,5,7,9,10]};function k(e,t){const a=[1,2,3,4,5,6,7,8,9,10,11];return a.map(r=>e.includes(r)?t.includes(r)?1/a.filter(e=>t.includes(e)).length:-1/a.filter(e=>!t.includes(e)).length:0).reduce((e,t)=>e+t)}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}let w=null;function S(e){return t=>{e(Number(t.target.value))}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement((function(){const e=Object(r.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)({}),s=Object(i.a)(o,2),u=s[0],h=s[1],m=Object(r.useState)(d),v=Object(i.a)(m,2),k=v[0],O=v[1],C=Object(r.useState)(10),E=Object(i.a)(C,2),x=E[0],P=E[1],D=Object(r.useState)(0),A=Object(i.a)(D,2),M=A[0],G=A[1],F=Object(r.useCallback)(function(e,t,a,r,n,c){return async o=>{const s=f(o,c);if(s){console.log(b(s));const c=await async function(e,t,a,r){if(r(["".concat(b(e)," - PLAY"),...t.splice(0,16)]),!w)return;return w.play(b(e),void 0,{release:a})}(s,e,n,t);if(!c)return;r(j({},a,{[_(s)]:[...a[_(s)]||[],{stop:()=>c.stop()}]}))}}}(a,c,u,h,x,M),[a,u]),N=Object(r.useCallback)(function(e,t,a,r,n){return async c=>{const o=f(c,n);o&&(console.log(b(o)),await async function(e,t,a,r){r(["".concat(b(e)," - STOP"),...a.splice(0,16)]),t.forEach(e=>e.stop())}(o,a[_(o)]||[],e,t),r(j({},a,{[_(o)]:void 0})))}}(a,c,u,h,M),[a,u]),B=Object(r.useCallback)(function(e){return t=>{e(t.target.value)}}(O),[]),z=Object(r.useCallback)(S(P),[]),I=Object(r.useCallback)(S(G),[]),U=Object(r.useCallback)((V=k,async()=>{w=await Object(l.instrument)(new AudioContext,V)}),[k]);var V;const q=Object.keys(u).filter(e=>u[e]).map(e=>p(Number(e)));return n.a.createElement("div",{onKeyDown:F,onKeyUp:N,tabIndex:0},n.a.createElement("div",null,"Instrument:",n.a.createElement("select",{onChange:B,defaultValue:d},y.map((e,t)=>n.a.createElement("option",{key:t,value:e},e.split("_").map(e=>e?e[0].toUpperCase()+e.substr(1):e).join(" "))))),n.a.createElement("div",null,"Transpose:",n.a.createElement("input",{onChange:I,defaultValue:String(M)})),n.a.createElement("div",null,"Release:"," ",n.a.createElement("input",{onChange:z,defaultValue:String(x)})),n.a.createElement("div",null,n.a.createElement("button",{onClick:U},"Start")),n.a.createElement("p",null,"Playing:",q.map(e=>b(e)).join(", ")||"-"),n.a.createElement("p",null,"Guess:",function(e){if(0===e.length)return"N/A";const t=e.map(e=>_(e)),a=p(Math.min(...t)),r=g(e),n=g(e.filter(e=>e.key!==a.key));return r.score<n.score?"".concat(n.key).concat(n.label,"/").concat(a.key," (").concat(Math.ceil(100*n.score),"%)"):"".concat(a.key).concat(r.label," (").concat(Math.ceil(100*r.score),"%)")}(q)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},6:function(e,t,a){e.exports=a(26)}},[[6,1,2]]]);
//# sourceMappingURL=main.8757c6d6.chunk.js.map