(this.webpackJsonppiano=this.webpackJsonppiano||[]).push([[0],{25:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(3),s=a.n(n),c=(a(9),a(4));let o;function i(e){switch(e.key){case o.C:return 12*e.octave+0+12;case o.CSharp:return 12*e.octave+1+12;case o.D:return 12*e.octave+2+12;case o.DSharp:return 12*e.octave+3+12;case o.E:return 12*e.octave+4+12;case o.F:return 12*e.octave+5+12;case o.FSharp:return 12*e.octave+6+12;case o.G:return 12*e.octave+7+12;case o.GSharp:return 12*e.octave+8+12;case o.A:return 12*e.octave+9+12;case o.ASharp:return 12*e.octave+10+12;case o.B:return 12*e.octave+11+12}}function l(e){const t=Math.floor(e/12)-1;switch(e%12){case 0:return{key:o.C,octave:t};case 1:return{key:o.CSharp,octave:t};case 2:return{key:o.D,octave:t};case 3:return{key:o.DSharp,octave:t};case 4:return{key:o.E,octave:t};case 5:return{key:o.F,octave:t};case 6:return{key:o.FSharp,octave:t};case 7:return{key:o.G,octave:t};case 8:return{key:o.GSharp,octave:t};case 9:return{key:o.A,octave:t};case 10:return{key:o.ASharp,octave:t};case 11:return{key:o.B,octave:t};default:return{key:o.C,octave:0}}}function u(e){return e.key.toUpperCase()+e.octave}!function(e){e.C="C",e.CSharp="C#",e.D="D",e.DSharp="D#",e.E="E",e.F="F",e.FSharp="F#",e.G="G",e.GSharp="G#",e.A="A",e.ASharp="A#",e.B="B"}(o||(o={}));const _=[{firstNote:{key:o.C,octave:3},keys:["z","s","x","d","c","v","g","b","h","n","j","m",",","l",".",";","/","\\","]"]},{firstNote:{key:o.C,octave:4},keys:["q","2","w","3","e","r","5","t","6","y","7","u","i","9","o","0","p","@","^","["]},{firstNote:{key:o.A,octave:5},keys:["Enter"]}];function h(e,t){if(e.repeat)return;const a=_.find((t=>t.keys.includes(e.key)));if(!a)return;const r=a.keys.indexOf(e.key);return n=a.firstNote,s=r+t,l(i(n)+s);var n,s}const p=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"],b="acoustic_grand_piano";function d(e){if(0===e.length)return"N/A";const t=e.map((e=>i(e))),a=l(Math.min(...t)),r=y(e),n=y(e.filter((e=>e.key!==a.key)));return r.score<n.score?`${n.key}${n.label}/${a.key} (${Math.ceil(100*n.score)}%)`:`${a.key}${r.label} (${Math.ceil(100*r.score)}%)`}function y(e){const t=e.map((e=>i(e))),a=Math.min(...t),r=l(a),n=Array(11).fill(null).map(((e,t)=>t+1)).filter((e=>t.some((t=>(t-a)%12===e)))),s=Object.keys(f).map((e=>({label:e,score:v(n,f[e])})));return{key:r.key,...s.reduce(((e,t)=>e.score>=t.score?e:t))}}const f={5:[7],"":[4,7],m:[3,7],aug:[4,8],dim:[3,6],sus2:[2,7],sus4:[5,7],M7:[4,7,11],m7:[3,7,10],7:[4,7,10],"7\u266d5":[4,6,10],"7sus4":[5,7,10],mM7:[3,7,11],dim7:[3,6,11],"\xf87":[3,6,10],M9:[2,4,7,11],m9:[2,3,7,10],M11:[2,4,5,7,11],m11:[2,3,5,7,10],M13:[2,4,6,7,9,11],m13:[2,3,5,7,9,10]};function v(e,t){const a=[1,2,3,4,5,6,7,8,9,10,11];return a.map((r=>e.includes(r)?t.includes(r)?1/a.filter((e=>t.includes(e))).length:-1/a.filter((e=>!t.includes(e))).length:0)).reduce(((e,t)=>e+t))}var k=a(0);let m=null;function g(){const[e,t]=Object(r.useState)([]),[a,n]=Object(r.useState)({}),[s,o]=Object(r.useState)(b),[_,y]=Object(r.useState)(10),[f,v]=Object(r.useState)(0),g=Object(r.useCallback)(function(e,t,a,r,n,s){return async c=>{const o=h(c,s);if(o){console.log(u(o));const s=await async function(e,t,a,r){if(r([`${u(e)} - PLAY`,...t.splice(0,16)]),!m)return;return m.play(u(e),void 0,{release:a})}(o,e,n,t);if(!s)return;r({...a,[i(o)]:[...a[i(o)]||[],{stop:()=>s.stop()}]})}}}(e,t,a,n,_,f),[e,a]),x=Object(r.useCallback)(function(e,t,a,r,n){return async s=>{const c=h(s,n);c&&(console.log(u(c)),await async function(e,t,a,r){r([`${u(e)} - STOP`,...a.splice(0,16)]),t.forEach((e=>e.stop()))}(c,a[i(c)]||[],e,t),r({...a,[i(c)]:void 0}))}}(e,t,a,n,f),[e,a]),O=Object(r.useCallback)(function(e){return t=>{e(t.target.value)}}(o),[]),w=Object(r.useCallback)(j(y),[]),C=Object(r.useCallback)(j(v),[]),S=Object(r.useCallback)((A=s,async()=>{m=await Object(c.instrument)(new AudioContext,A)}),[s]);var A;const M=Object.keys(a).filter((e=>a[e])).map((e=>l(Number(e))));return Object(k.jsxs)("div",{onKeyDown:g,onKeyUp:x,tabIndex:0,children:[Object(k.jsxs)("div",{children:["Instrument:",Object(k.jsx)("select",{onChange:O,defaultValue:b,children:p.map(((e,t)=>Object(k.jsx)("option",{value:e,children:e.split("_").map((e=>e?e[0].toUpperCase()+e.substr(1):e)).join(" ")},t)))})]}),Object(k.jsxs)("div",{children:["Transpose:",Object(k.jsx)("input",{onChange:C,defaultValue:String(f)})]}),Object(k.jsxs)("div",{children:["Release:"," ",Object(k.jsx)("input",{onChange:w,defaultValue:String(_)})]}),Object(k.jsx)("div",{children:Object(k.jsx)("button",{onClick:S,children:"Start"})}),Object(k.jsxs)("p",{children:["Playing:",M.map((e=>u(e))).join(", ")||"-"]}),Object(k.jsxs)("p",{children:["Guess:",d(M)]})]})}function j(e){return t=>{e(Number(t.target.value))}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(k.jsx)(g,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))},9:function(e,t,a){}},[[25,1,2]]]);
//# sourceMappingURL=main.761729ca.chunk.js.map